1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å 2-—é –≥–ª–∞–≤—É Kubernetes in Action –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ —Ç–∞–º –ø—Ä–∏–º–µ—Ä—ã.

- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –ø—Ä–∏–º–µ—Ä—É –∏–∑ –≤—Ç–æ—Ä–æ–π –≥–ª–∞–≤—ã:

- –¢–∞–∫ –∫–∞–∫ –¥–æ–∫–µ—Ä —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Ç–æ –∑–∞–ø—É—Å–∫–∞—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
```
root@ales:/home/ales# docker run busybox echo "Hello world"
Unable to find image 'busybox:latest' locally
latest: Pulling from library/busybox
ec562eabd705: Pull complete 
Digest: sha256:9ae97d36d26566ff84e8893c64a6dc4fe8ca6d1144bf5b87b2b85a32def253c7
Status: Downloaded newer image for busybox:latest
Hello world
```

- –°–æ–∑–¥–∞—é —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
root@ales:/home/ales# nano app.js
const http = require('http');
const os = require('os');
console.log("Kubia server starting...");
var handler = function(request, response) {
 console.log("Received request from " + request.connection.remoteAddress);
 response.writeHead(200);
 response.end("You've hit " + os.hostname() + "\n");
};
var www = http.createServer(handler);
www.listen(8080);
```

- –°–æ–∑–¥–∞—é Dockerfile
```
root@ales:/home/ales# nano Dockerfile
FROM node:7
ADD app.js /app.js
ENTRYPOINT ["node", "app.js"]
```

- –°–æ–∑–¥–∞—é –æ–±—Ä–∞–∑ 
```
root@ales:/home/ales#  docker build -t kubia .
[+] Building 144.1s (8/8) FINISHED                               docker:default
 => [internal] load build definition from Dockerfile                       0.0s
 => => transferring dockerfile: 98B                                        0.0s
 => [internal] load metadata for docker.io/library/node:7                  2.2s
 => [auth] library/node:pull token for registry-1.docker.io                0.0s
 => [internal] load .dockerignore                                          0.0s
 => => transferring context: 2B                                            0.0s
 => [internal] load build context                                          0.0s
 => => transferring context: 389B                                          0.0s
 => [1/2] FROM docker.io/library/node:7@sha256:af5c2c6ac8bc3fa372ac031e  141.1s
 => => sha256:ad74af05f5a24bcf9459ae1cf7718628c2aeb6b 52.61MB / 52.61MB  120.2s
 => => sha256:3245b5a1c52cbf0ae23d948fb94ef7b321e3dc 131.86MB / 131.86MB  20.0s
 => [2/2] ADD app.js /app.js                                               0.6s
 => exporting to image                                                     0.0s
 => => exporting layers                                                    0.0s
 => => writing image sha256:28f4d1981e00c71d3fd0f0622fe8116a55876289784b9  0.0s
 => => naming to docker.io/library/kubia                                   0.0s
```

- –ü—Ä–æ–≤–µ—Ä—è—é —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤
```
root@ales:/home/ales# docker images
REPOSITORY               TAG       IMAGE ID       CREATED         SIZE
kubia                    latest    28f4d1981e00   3 minutes ago   660MB
busybox                  latest    65ad0d468eb1   14 months ago   4.26MB
docker/getting-started   latest    3e4394f6b72f   19 months ago   47MB
```

- –ó–∞–ø—É—Å–∫–∞—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
```
root@ales:/home/ales# docker run --name kubia-container -p 8080:8080 -d kubia
6575e70aa16faa2528517b65eab82213e04a1da8c63458d193066c00cfdf7177
```

- –ü—Ä–æ–≤–µ—Ä—è—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
```
root@ales:/home/ales# curl localhost:8080
You've hit 6575e70aa16f
```

- –î–æ–±–∞–≤–ª—è—é —Ç–µ–≥ —Å–≤–æ–µ–≥–æ dockerhub
```
root@ales:/home/ales# docker tag kubia ales11/kubia
```

- –ü—É—à—É –≤ dockerhub –æ–±—Ä–∞–∑
```
root@ales:/home/ales#  docker push ales11/kubia
Using default tag: latest
The push refers to repository [docker.io/ales11/kubia]
494a67e6f678: Pushed 
ab90d83fa34a: Mounted from library/node 
8ee318e54723: Mounted from library/node 
e6695624484e: Mounted from library/node 
da59b99bbd3b: Mounted from library/node 
5616a6292c16: Mounted from library/node 
f3ed6cb59ab0: Mounted from library/node 
654f45ecb7e3: Mounted from library/node 
2c40c66f7667: Mounted from library/node 
latest: digest: sha256:460728d71d06626119a9f9e0abce98295a29694565bd3aef9ba3baa4f0215a88 size: 2213
```

- –ö–∞—á–∞—é minikube
```
root@ales:/home/ales#  curl -Lo minikube https://storage.googleapis.com/minikube/releases/v0.23.0/minikube-linux-amd64 && chmod +x minikube && sudo mv minikube/usr/local/bin/
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 39.3M  100 39.3M    0     0  7095k      0  0:00:05  0:00:05 --:--:-- 8517k
```

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é kubectl
```
root@ales:/home/ales# curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/v1.8.0/bin/linux/amd64/kubectl && chmod +x kubectl && sudo mv kubectl /usr/local/bin/
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 49.8M  100 49.8M    0     0  9799k      0  0:00:05  0:00:05 --:--:-- 11.2M
```


- –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä —á–µ—Ä–µ–∑ VirtualBox. –í–∏—Ä—Ç—É–ª–∫–∞ –≤ VB —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å, –Ω–æ –≤ –Ω–µ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∏ –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–∞–¥. –¢–∞–∫ –∏ –Ω–µ —Å–º–æ–≥ —Ä–∞–±–æ—Ä–∞—Ç—å—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π(
–í –∏—Ç–æ–≥–µ –Ω–∞—à–µ–ª —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –¥—Ä–∞–π–≤–µ—Ä docker. –ü–µ—Ä–µ–µ—Ö–∞–ª –≤ –æ–±–ª–∞–∫–æ –∏ –∑–∞–ø—É—Å—Ç–∏–ª —É–∂–µ –æ—Ç—Ç—É–¥–∞, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞—á–∞–ª —Å–≤–æ–π –æ–±—Ä–∞–∑ –∏–∑ DockerHub   
```
root@new:/home/alesworld1# minikube start --driver=docker --force
üòÑ  minikube v1.33.1 on Debian 12.6 (amd64)
‚ùó  minikube skips various validations when --force is supplied; this may lead to unexpected behavior
‚ú®  Using the docker driver based on user configuration
üõë  The "docker" driver should not be used with root privileges. If you wish to continue as root, use --force.
üí°  If you are running minikube within a VM, consider using --driver=none:
üìò    https://minikube.sigs.k8s.io/docs/reference/drivers/none/

üßØ  The requested memory allocation of 1976MiB does not leave room for system overhead (total system memory: 1976MiB). You may face stability issues.
üí°  Suggestion: Start minikube with less memory allocated: 'minikube start --memory=1976mb'

üìå  Using Docker driver with root privileges
üëç  Starting "minikube" primary control-plane node in "minikube" cluster
üöú  Pulling base image v0.0.44 ...
üíæ  Downloading Kubernetes v1.30.0 preload ...
    > preloaded-images-k8s-v18-v1...:  342.90 MiB / 342.90 MiB  100.00% 100.87 
    > gcr.io/k8s-minikube/kicbase...:  481.58 MiB / 481.58 MiB  100.00% 63.00 M
üî•  Creating docker container (CPUs=2, Memory=1976MB) ...
üê≥  Preparing Kubernetes v1.30.0 on Docker 26.1.1 ...
    ‚ñ™ Generating certificates and keys ...
    ‚ñ™ Booting up control plane ...
    ‚ñ™ Configuring RBAC rules ...
üîó  Configuring bridge CNI (Container Networking Interface) ...
üîé  Verifying Kubernetes components...
    ‚ñ™ Using image gcr.io/k8s-minikube/storage-provisioner:v5
üåü  Enabled addons: storage-provisioner, default-storageclass

‚ùó  /usr/local/bin/kubectl is version 1.8.0, which may have incompatibilities with Kubernetes 1.30.0.
    ‚ñ™ Want kubectl v1.30.0? Try 'minikube kubectl -- get pods -A'
üèÑ  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
```

- –í—Ä–æ–¥–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
```
root@new:/home/alesworld1# kubectl cluster-info
Kubernetes master is running at https://192.168.49.2:8443
```

- –í–∫–ª—é—á–∞—é Kubernetes engine –∏ —Å–æ–∑–¥–∞—é —É—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Ç–µ—Ä
```
root@new:/home/alesworld1# gcloud container clusters create kubia --num-nodes 3 --machine-type e2-micro --zone us-central1-a
Default change: VPC-native is the default mode during cluster creation for versions greater than 1.21.0-gke.1500. To create advanced routes based clusters, please pass the `--no-enable-ip-alias` flag
Note: The Kubelet readonly port (10255) is now deprecated. Please update your workloads to use the recommended alternatives. See https://cloud.google.com/kubernetes-engine/docs/how-to/disable-kubelet-readonly-port for ways to check usage and for migration instructions.
Note: Your Pod address range (`--cluster-ipv4-cidr`) can accommodate at most 1008 node(s).
Creating cluster kubia in us-central1-a... Cluster is being health-checked (master is healthy)...done.   
Created [https://container.googleapis.com/v1/projects/white-airship-427415-i0/zones/us-central1-a/clusters/kubia].
To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-central1-a/kubia?project=white-airship-427415-i0
CRITICAL: ACTION REQUIRED: gke-gcloud-auth-plugin, which is needed for continued use of kubectl, was not found or is not executable. Install gke-gcloud-auth-plugin for use with kubectl by following https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#install_plugin
kubeconfig entry generated for kubia.
NAME   LOCATION       MASTER_VERSION      MASTER_IP      MACHINE_TYPE  NODE_VERSION        NUM_NODES  STATUS
kubia  us-central1-a  1.29.6-gke.1038001  34.41.233.115  e2-micro      1.29.6-gke.1038001  3          RUNNING
```


- –î–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø–ª–∞–≥–∏–Ω –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º
```

```

2. –ü–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å Workload –æ–±—ä–µ–∫—Ç–∞–º–∏ Kubernetes (Pod, ReplicaSet, DaemonSet, Job, CronJob), –∞ —Ç–∞–∫–∂–µ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (Liveness Probe, Resources) –ø—É—Ç–µ–º –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ lecture45.