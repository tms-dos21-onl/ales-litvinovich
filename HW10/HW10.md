1. Добавить новый диск к виртуальной машине и проверить, что система видит его.

```
ales@ales:~$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda      8:0    0    20G  0 disk 
├─sda1   8:1    0     1M  0 part 
└─sda2   8:2    0    20G  0 part /var/snap/firefox/common/host-hunspell
                                 /
sdb      8:16   0     5G  0 disk 
└─sdb1   8:17   0     5G  0 part /mnt/home
sdc      8:32   0     6G  0 disk 
sr0     11:0    1  1024M  0 rom  
sr1     11:1    1  1024M  0 rom 
```

2. Вывести в консоль информацию по текущему размеру файловой системы.

```
ales@ales:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
tmpfs           388M  2.6M  385M   1% /run
/dev/sda2        20G   13G  6.2G  67% /
tmpfs           1.9G     0  1.9G   0% /dev/shm
tmpfs           5.0M  8.0K  5.0M   1% /run/lock
/dev/sdb1       4.9G   60K  4.9G   1% /mnt/home
tmpfs           388M  104K  387M   1% /run/user/1000
```

3. Расширить корневую файловую систему за счёт добавленного диска.
    Создаю новый раздел
```
root@ales:/home/ales# fdisk /dev/sdc

Welcome to fdisk (util-linux 2.39.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.
Created a new DOS (MBR) disklabel with disk identifier 0x50bc8cd5.

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1): 
First sector (2048-12582911, default 2048): 
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-12582911, default 12582911): 

Created a new partition 1 of type 'Linux' and of size 6 GiB.

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.
```
Создаю файловую систему
```
root@ales:/home/ales# mkfs.ext4 /dev/sdc1
mke2fs 1.47.0 (5-Feb-2023)
Creating filesystem with 1572608 4k blocks and 393216 inodes
Filesystem UUID: 171cfda1-7f00-4265-ab9c-b307437cc16b
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (16384 blocks): done
Writing superblocks and filesystem accounting information: done 
```
Монтирую новый раздел
```
root@ales:/home/ales# mkdir /mnt/new
root@ales:/home/ales# mount /dev/sdc1 /mnt/new
```

Проверяю 
```
root@ales:/home/ales# df -h
Filesystem      Size  Used Avail Use% Mounted on
tmpfs           388M  2.5M  385M   1% /run
/dev/sda2        20G   13G  6.0G  68% /
tmpfs           1.9G     0  1.9G   0% /dev/shm
tmpfs           5.0M  8.0K  5.0M   1% /run/lock
/dev/sdb1       4.9G   60K  4.9G   1% /mnt/home
tmpfs           388M  108K  387M   1% /run/user/1000
/dev/sdc1       5.9G   24K  5.6G   1% /mnt/new
```

4. Вывести информацию по новому размеру файловой системы.
5. Вывести в консоль текущую рабочую директорию.
6. Вывести в консоль все файлы из домашней директории.
7. Построить маршрут до google.com при помощи утилиты traceroute.

8. Установить Sonatype Nexus OSS по следующей инструкции, а именно:
- установку произвести в директорию /opt/nexus.
- запустить приложение от отдельного пользователя nexus.
- реализовать systemd оболочку для запуска приложения как сервис.
Качаю архив и распаковываю его
```

wget https://download.sonatype.com/nexus/3/latest-unix.tar.gz
tar -zxvf latest-unix.tar.gz -C /opt/nexus --strip-components=1
```
Создаю ползователя, даю права на папки из архива и прописываю для запуска приложения от его имени
```
useradd  nexus
chown -R nexus:nexus /opt/nexus
chown -R nexus:nexus /opt/sonatype-work

nano /opt/nexus/bin/nexus.rc
run_as_user="nexus"
```
Создаю nexus.service
```
[Unit]
Description=nexus service
After=network.target

[Service]
Type=forking
LimitNOFILE=65536
ExecStart=/opt/nexus/bin/nexus start
ExecStop=/opt/nexus/bin/nexus stop
User=nexus
Restart=on-abort

[Install]
WantedBy=multi-user.target
```
Запускаю и проверю сервис

```
root@ales:/opt/sonatype-work/nexus3# systemctl status nexus
● nexus.service - nexus service
     Loaded: loaded (/etc/systemd/system/nexus.service; disabled; preset: enabled)
     Active: active (running) since Tue 2024-05-28 14:23:31 +03; 30min ago
    Process: 39194 ExecStart=/opt/nexus/bin/nexus start (code=exited, status=0/SUCCESS)
   Main PID: 39377 (java)
      Tasks: 101 (limit: 4570)
     Memory: 1.6G
        CPU: 2min 18.546s
     CGroup: /system.slice/nexus.service
             └─39377 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -server -Dinstall4>

May 28 14:23:30 ales systemd[1]: Starting nexus.service - nexus service...
May 28 14:23:31 ales nexus[39194]: Starting nexus
May 28 14:23:31 ales systemd[1]: Started nexus.service - nexus service.
```

9. Создать в Nexus proxy репозиторий для пакетов ОС и разрешить анонимный доступ.

Захожу на 192.168.217.141:8081, меня пароль на свой и включаю анонимный доступ.

Затем создаю apt репозиторий:
![Результат](https://github.com/tms-dos21-onl/ales-litvinovich/assets/87812043/40dcf8d9-e56a-487d-b717-972acdb29a19)


10. Поменять для текущей VM основной репозиторий пакетов на созданный ранее proxy в Nexus.
В файле /etc/apt/sources.list изменил источники на http://192.168.217.141:8081/repository/apt/

11. Выполнить установку пакета snap и убедиться, что на proxy репозитории в Nexus появились пакеты.

![Результат](https://github.com/tms-dos21-onl/ales-litvinovich/assets/87812043/eefffbbc-0896-43d4-8158-b03282938693)


12. (**) На основании шагов из предыдущих пунктов создать DEB/RPM пакет для установки Nexus и загрузить его в Nexus.
